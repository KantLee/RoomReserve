<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>kconcealdialog.cpp</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
    <body onload="prettyPrint()">
        <h4></h4>
        <pre class="prettyprint lang-cpp linenums">
ï»¿#include "kconcealdialog.h"

KConcealDialog::KConcealDialog(const QVector&lt;KPersonalReserve&gt; &amp;reservations, QWidget *parent)
	: QDialog(parent)
<span style = "background-color:#dfd">{
	ui = new Ui::KConcealDialog();
	ui-&gt;setupUi(this);
    for (const auto &amp;reservation : reservations)
    {</span>
        QString displayText = QString("é¢çº¦ID: %1, ä¼è®®å®¤: %2, é¢çº¦æ¶é´: %3 %4, ç¶æ: %5")
<span style = "background-color:#dfd">            .arg(reservation.reserveID)</span>
            .arg(reservation.roomName)
            .arg(reservation.week)
            .arg(reservation.day)
            .arg(reservation.status);
        QListWidgetItem *item = new QListWidgetItem(displayText, ui-&gt;listWidget);
<span style = "background-color:#dfd">        item-&gt;setData(Qt::UserRole, reservation.reserveID); // å­å¨é¢çº¦ID
        item-&gt;setData(Qt::UserRole + 1, reservation.status); // å­å¨é¢çº¦ç¶æ
    }
    connect(ui-&gt;confirmButton, &amp;QPushButton::clicked, [this]() {
        // å¨æ­¤å¿åå½æ°ä¸­ï¼ç°å¨å¯ä»¥ä½¿ç¨ this-&gt;ui-&gt;listWidget æ¥è®¿é®listWidget</span>
        if (ui-&gt;listWidget-&gt;selectedItems().isEmpty())
<span style = "background-color:#dfd">        {</span>
            QMessageBox::warning(this, "åæ¶é¢çº¦", "è¯·åéæ©ä¸ä¸ªé¢çº¦ä»¥è¿è¡åæ¶");
<span style = "background-color:#dfd">        }
        else</span>
        {
            for (QListWidgetItem *item : ui-&gt;listWidget-&gt;selectedItems())
<span style = "background-color:#dfd">            {</span>
                QString status = item-&gt;data(Qt::UserRole + 1).toString();
<span style = "background-color:#dfd">                if (status == "é¢çº¦åæ¶")
                {</span>
                    QMessageBox::warning(this, "åæ¶é¢çº¦", "éä¸­çé¢çº¦å·²ç»æ¯åæ¶ç¶æï¼æ æ³åæ¬¡åæ¶");
<span style = "background-color:#fdd">                }
                else</span>
                {
                    emit confirmed(item-&gt;data(Qt::UserRole).toInt());
<span style = "background-color:#dfd">                    accept();  // å³é­å¯¹è¯æ¡
                    break;
                }</span>
            }
<span style = "background-color:#fdd">        }</span>
    });
<span style = "background-color:#dfd">    connect(ui-&gt;cancelButton, &amp;QPushButton::clicked, this, &amp;QDialog::reject);
}
</span>
KConcealDialog::~KConcealDialog()
{
<span style = "background-color:#dfd">	delete ui;
}</span></pre>
        <hr />
        <table width="100%">
            <thead>
                <tr>
                    <th align="center">
                        <small>Generated by</small>
                        <a href="https://github.com/OpenCppCoverage/OpenCppCoverage/releases">
                            <strong>OpenCppCoverage (Version: 0.9.9.0)</strong>
                        </a>
                    </th>
                </tr>
            </thead>
        </table>
    </body>
</html>